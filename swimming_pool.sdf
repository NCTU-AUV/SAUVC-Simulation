<?xml version="1.0" ?>
<sdf version="1.8">
  <world name="swimming_pool">

    <plugin filename="gz-sim-physics-system" name="gz::sim::systems::Physics"/>
    <plugin filename="gz-sim-user-commands-system" name="gz::sim::systems::UserCommands"/>
    <plugin filename="gz-sim-scene-broadcaster-system" name="gz::sim::systems::SceneBroadcaster"/>

    <plugin filename="gz-sim-buoyancy-system" name="gz::sim::systems::Buoyancy">
      <graded_buoyancy>
        <default_density>1000</default_density>
        <density_change>
          <above_depth>0</above_depth>
          <density>1</density>
        </density_change>
      </graded_buoyancy>
    </plugin>

    <model name="buoyant_box">
      <static>false</static>

      <pose>0 0 -0.30 0 0 0</pose>

      <link name="box_link">
        <inertial>
          <mass>100</mass>
          <inertia>
            <ixx>4.1666667</ixx>
            <iyy>4.1666667</iyy>
            <izz>4.1666667</izz>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyz>0</iyz>
          </inertia>
        </inertial>

        <collision name="collision">
          <geometry>
            <box>
              <size>0.5 0.5 0.5</size>
            </box>
          </geometry>
        </collision>
        <visual name="visual">
          <geometry>
            <box>
              <size>0.5 0.5 0.5</size>
            </box>
          </geometry>
        </visual>
      </link>

      <plugin filename="ignition-gazebo-hydrodynamics-system" name="ignition::gazebo::systems::Hydrodynamics">
        <link_name>box_link</link_name>
        <xU>-10</xU>
        <xUabsU>-3</xUabsU>
        <yV>-10</yV>
        <yVabsV>-3</yVabsV>
        <zW>-10</zW>
        <zWabsW>-3</zWabsW>
      </plugin>

      <link name="thruster">
        <pose>-0.30 -0.20 -0.30   0 0 0</pose>
        <inertial>
          <mass>0.2</mass>
          <inertia>
            <ixx>1e-4</ixx>
            <iyy>1e-4</iyy>
            <izz>1e-4</izz>
            <ixy>0</ixy>
            <ixz>0</ixz>
            <iyz>0</iyz>
          </inertia>
        </inertial>
        <visual name="tube">
          <geometry>
            <cylinder>
              <radius>0.03</radius>
              <length>0.12</length>
            </cylinder>
          </geometry>
        </visual>
      </link>

      <joint name="thruster_joint" type="revolute">
        <parent>box_link</parent>
        <child>thruster</child>
        <axis>
          <xyz>0 0 1</xyz>
        </axis>
      </joint>

      <plugin filename="ignition-gazebo-thruster-system" name="ignition::gazebo::systems::Thruster">
        <topic>/thrust/right</topic>
        <joint_name>thruster_joint</joint_name>
        <fluid_density>1000</fluid_density>
        <propeller_diameter>0.10</propeller_diameter>
        <thrust_coefficient>0.0044</thrust_coefficient>
        <velocity_control>false</velocity_control>
      </plugin>

    </model>

  </world>
</sdf>